(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{149:function(e,t,a){},220:function(e,t,a){},222:function(e,t,a){e.exports=a.p+"static/media/concatLogo.0661598e.svg"},256:function(e,t,a){e.exports=a(427)},264:function(e,t,a){},35:function(e,t,a){},424:function(e,t,a){},426:function(e,t,a){},427:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(62),s=a.n(i),c=a(36),l=a(8),o=a(9),u=a(11),p=a(10),m=a(12),d=a(20),h=a.n(d),f=(a(65),a(79),{getUser:function(e){return h.a.database().ref("/users/"+e).once("value").then(function(e){return e.val()})},deleteUser:function(e){return h.a.database().ref("users/"+e).remove()},saveUser:function(e){var t=this,a=h.a.database().ref().child("users").push().key;return e.id=a,h.a.database().ref("users/"+a).set(e).then(function(e){return t.getUser(a)})},editUser:function(e){var t=this,a={};return a["/users/"+e.id]=e,h.a.database().ref().update(a).then(function(){return t.getUser(e.id)})}}),v=function(e){localStorage.setItem("user",JSON.stringify(e))},k=function(e,t){return T(e,t).then(function(e){return E(e)}).then(function(e){return v(e),e})},E=function(e){return d.database().ref("/users/"+e).once("value").then(function(e){return e.val()})},b=function(){var e=localStorage.getItem("user");return e?JSON.parse(e):null},g=function(){localStorage.removeItem("user")},y=function(e,t){return d.auth().createUserWithEmailAndPassword(e,t).then(function(e){return e.user.uid})},T=function(e,t){return d.auth().signInWithEmailAndPassword(e,t).then(function(e){return e.user.uid}).catch(function(){alert("No LoG iN. TrY AgAiN")})},j=a(222),O=a.n(j),C=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("img",{src:O.a,className:"logo-header ui medium image",alt:"concat logo"}))}}]),t}(n.Component),I=a(445),N=a(442),U=a(436),S=a(437),w=a(33),M=(a(264),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={},a.handleItemClick=function(e,t){var n=t.name;return a.setState({activeItem:n})},a.logout=function(){a.props.onLogout(),a.props.clearActiveUser(null),a.props.history.push("/login")},a.handleNavView=function(){if(null!==a.props.activeUser&&!1===a.props.activeUser.student){var e=a.state.activeItem;return r.a.createElement(I.a,{secondary:!0},r.a.createElement(I.a.Item,null,r.a.createElement(c.b,{to:"/dashboard"},"Profile")),r.a.createElement(N.a,{closeOnChange:!0,item:!0,text:"Open Tickets"},r.a.createElement(N.a.Menu,null,r.a.createElement(N.a.Item,null,r.a.createElement(c.b,{to:"/tickets/my-tickets"},"My Tickets")),r.a.createElement(N.a.Item,null,r.a.createElement(c.b,{to:"/tickets/solved-tickets"},"Solved Tickets")))),r.a.createElement(I.a.Item,null,r.a.createElement(c.b,{to:"/teacher/office-hours"},"Office Hours")),r.a.createElement(I.a.Menu,{position:"right"},r.a.createElement(I.a.Item,null,r.a.createElement(U.a,{icon:"search",placeholder:"Search..."})),r.a.createElement(I.a.Item,{name:"logout",active:"logout"===e,onClick:function(){return a.logout()}})))}if(null!==a.props.activeUser&&a.props.activeUser.student){var t=a.state.activeItem;return r.a.createElement(I.a,{secondary:!0},r.a.createElement(I.a.Item,null,r.a.createElement(c.b,{to:"/dashboard"},"Profile")),r.a.createElement(N.a,{closeOnChange:!0,item:!0,text:"Open Tickets"},r.a.createElement(N.a.Menu,null,r.a.createElement(N.a.Item,null,r.a.createElement(c.b,{to:"/tickets/my-tickets"},"My Tickets")),r.a.createElement(N.a.Item,null,r.a.createElement(c.b,{to:"/tickets/solved-tickets"},"Solved Tickets")))),r.a.createElement(I.a.Menu,{position:"right"},r.a.createElement(I.a.Item,null,r.a.createElement(U.a,{icon:"search",placeholder:"Search..."})),r.a.createElement(I.a.Item,{name:"logout",active:"logout"===t,onClick:function(){return a.logout()}})))}return null},a.isAuthenticated=function(){return null!==localStorage.getItem("user")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"navigation-bar",ref:this.contextRef},r.a.createElement(S.a,{context:this.contextRef},this.handleNavView()))}}]),t}(n.Component)),A=Object(w.f)(M),x=a(246),B=a(440),D=a(438),J=a(428),R=a(443),F=a(88),P=a.n(F),V=(a(35),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={userId:a.props.userId,classId:a.props.classId,ticketComplete:a.props.ticketComplete,ticketTitle:a.props.ticketTitle,ticketBody:a.props.ticketBody,submitTime:a.props.submitTime,linked:a.props.linked,solutionNotes:a.props.solutionNotes},a.submitTimeInterval={},a.componentWillUnmount=function(){clearInterval(a.submitTimeInterval)},a.componentDidMount=function(){a.checkSubmitTime()},a.checkSubmitTime=function(){a.submitTimeInterval=setInterval(function(){a.setState(a.state)},15e3)},a.handleAssign=function(){a.props.addTeacherTicket({ticketId:a.props.item.id,userId:a.props.activeUser.id})},a.handleJoinTicket=function(){a.props.addJoin({userId:a.props.activeUser.id,ticketId:a.props.item.id})},a.handleRemoveJoinTicket=function(){a.props.deleteJoin(a.props.joinedTicketId)},a.handleEdit=function(){a.props.handleOpenModal(!0),a.props.editTicketState({image:a.props.image,userId:a.props.item.userId,classId:a.props.item.classId,ticketComplete:!1,ticketTitle:a.props.item.ticketTitle,ticketBody:a.props.item.ticketBody,submitTime:a.props.item.submitTime,linked:a.props.item.linked,solutionNotes:a.props.item.solutionNotes,id:a.props.item.id})},a.handleStudentSolve=function(){a.props.editTicket({userId:a.props.item.userId,classId:a.props.item.classId,ticketComplete:!0,ticketTitle:a.props.item.ticketTitle,ticketBody:a.props.item.ticketBody,submitTime:a.props.item.submitTime,linked:a.props.item.linked,solutionNotes:a.state.solutionNotes,id:a.props.item.id})},a.getUserImage=function(){return"object"===typeof a.props.image?a.props.image.map(function(e,t){return r.a.createElement("div",{className:"user-image-inline",key:t},r.a.createElement(x.a,{className:"circular tiny",key:t,src:e}))}):r.a.createElement(x.a,{className:"circular tiny",src:a.props.image})},a.handleMyTicketView=function(){return a.props.item.userId===a.props.activeUser.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,null,r.a.createElement(D.a,{label:"Solution Notes",placeholder:"Solution Notes",defaultValue:a.props.item.solutionNotes,onChange:function(e){return a.setState({solutionNotes:e.target.value})}})),r.a.createElement(J.a,{className:"steel",onClick:a.handleEdit},"Edit"),r.a.createElement(J.a,{className:"trolley",onClick:a.handleStudentSolve},"Marked Solved")):a.props.showRemoveJoin?a.props.showRemoveJoin?r.a.createElement(J.a,{onClick:a.handleRemoveJoinTicket},"Remove Join"):void 0:r.a.createElement(J.a,{className:"laurel",onClick:a.handleJoinTicket},"Join Ticket")},a.handleCardLength=function(){var e=P()(a.props.item.submitTime,"MMMM Do YYYY, h:mm:ss a"),t=P()().diff(e,"minutes");return t>3?(clearInterval(a.submitTimeInterval),"rose"):t>2?"straw":t>1?"steel":void 0},a.handleTicketView=function(){if(null!==a.props.activeUser&&!1===a.props.activeUser.student)return r.a.createElement(R.a,{centered:!0,fluid:!0,raised:!0,key:a.props.item.id,className:a.handleCardLength()},r.a.createElement("div",{className:"user-image-container"},a.getUserImage()),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,null,a.props.item.ticketTitle),r.a.createElement(R.a.Description,null,a.props.item.ticketBody),r.a.createElement(R.a.Meta,null,a.props.item.submitTime),r.a.createElement(J.a,{className:"trolley",onClick:a.handleAssign},"Assign")));if(null!==a.props.activeUser&&a.props.activeUser.student){var e="";return a.props.item.userId===a.props.activeUser.id?e="steel":null!==a.props.hasMultipleJoins&&a.props.hasMultipleJoins&&(e="laurel"),r.a.createElement(R.a,{centered:!0,fluid:!0,raised:!0,key:a.props.item.id,className:e},r.a.createElement("div",{className:"user-image-container"},a.getUserImage()),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,null,a.props.item.ticketTitle),r.a.createElement(R.a.Description,null,a.props.item.ticketBody),r.a.createElement(R.a.Meta,null,a.props.item.submitTime),a.handleMyTicketView()))}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.handleTicketView())}}]),t}(n.Component)),L=a(441),Y=a(64),q=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={active:a.props.openModal,userId:a.props.editTicketItem.userId,classId:a.props.editTicketItem.classId,ticketComplete:!1,ticketTitle:a.props.editTicketItem.ticketTitle,ticketBody:a.props.editTicketItem.ticketBody,submitTime:a.props.editTicketItem.submitTime,linked:a.props.editTicketItem.linked,solutionNotes:a.props.editTicketItem.solutionNotes,id:a.props.editTicketItem.id,opened:!1},a.onCloseModal=function(){a.props.handleOpenCloseModal(!1),a.setState({opened:!1})},a.handleEdit=function(){a.props.editTicket({userId:a.props.editTicketItem.userId,classId:a.props.editTicketItem.classId,ticketComplete:!1,ticketTitle:a.state.ticketTitle,ticketBody:a.state.ticketBody,submitTime:a.props.editTicketItem.submitTime,linked:a.props.editTicketItem.linked,solutionNotes:void 0===a.props.editTicketItem.solutionNotes?"":a.props.editTicketItem.solutionNotes,id:a.props.editTicketItem.id}),a.onCloseModal()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){null!=this.props.editTicketItem.id&&this.props.openModal&&!1===this.state.opened&&this.setState({active:this.props.openModal,userId:this.props.editTicketItem.userId,classId:this.props.editTicketItem.classId,ticketComplete:!1,ticketTitle:this.props.editTicketItem.ticketTitle,ticketBody:this.props.editTicketItem.ticketBody,submitTime:this.props.editTicketItem.submitTime,linked:this.props.editTicketItem.linked,solutionNotes:this.props.editTicketItem.solutionNotes,id:this.props.editTicketItem.id,opened:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(L.a,{className:"tiny",open:this.props.openModal,onClose:this.onCloseModal},r.a.createElement(Y.a,{name:"close",onClick:this.onCloseModal}),r.a.createElement(L.a.Header,null,"Edit Ticket"),r.a.createElement(L.a.Content,null,r.a.createElement(x.a,{circular:!0,className:"ui small image ticket-edit-image",src:this.props.editTicketItem.image}),r.a.createElement(L.a.Description,{className:"ticket-edit-fields"},r.a.createElement("label",null,"Ticket Title: "),r.a.createElement(U.a,{type:"text",className:"fluid",onChange:function(t){e.setState({ticketTitle:t.target.value})},defaultValue:this.props.editTicketItem.ticketTitle}),r.a.createElement("label",null,"Ticket Body: "),r.a.createElement(B.a,null,r.a.createElement(D.a,{className:"fluid",onChange:function(t){e.setState({ticketBody:t.target.value})},defaultValue:this.props.editTicketItem.ticketBody})))),r.a.createElement(L.a.Actions,null,r.a.createElement(J.a,{className:"rose",onClick:this.onCloseModal},"Cancel"),r.a.createElement(J.a,{className:"laurel",onClick:this.handleEdit},"Save"))))}}]),t}(n.Component),H=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={active:a.props.openModal},a.onCloseModal=function(){a.props.handleNotifyModal(!1)},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t={};return null!==this.props.notifyTicketItem&&void 0!==this.props.notifyTicketItem&&this.props.allTeacherTickets.forEach(function(a){a.ticketId===e.props.notifyTicketItem.id&&e.props.allUsers.forEach(function(e){e.id===a.userId&&(t=e)})}),r.a.createElement("div",null,r.a.createElement(L.a,{size:"tiny",basic:!0,open:this.props.openNotify,onClose:this.onCloseModal},r.a.createElement(Y.a,{name:"close",onClick:this.onCloseModal}),r.a.createElement(L.a.Header,null,"You're Up!"),r.a.createElement(L.a.Content,null,r.a.createElement(x.a,{circular:!0,className:"ui small image ticket-edit-image",src:t.image}),r.a.createElement("p",null,"Please see ",t.name," for help with ",null!==this.props.notifyTicketItem&&void 0!==this.props.notifyTicketItem?this.props.notifyTicketItem.ticketTitle:"")),r.a.createElement(L.a.Actions,null,r.a.createElement(J.a,{floated:"right",onClick:this.onCloseModal},"Got It"))))}}]),t}(n.Component),W=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",null,"Open Tickets")}}]),t}(n.Component),z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={openModal:!1,openNotify:!1,editTicketItem:{},notifyTicketItem:{}},a.editTicketState=function(e){a.setState({editTicketItem:e})},a.handleOpenCloseModal=function(e){a.setState({openModal:e})},a.handleNotifyModal=function(e,t){e&&"true"===localStorage.notifyModalOpenAlready||(e&&localStorage.setItem("notifyModalOpenAlready",!0),a.setState({openNotify:e,notifyTicketItem:t}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){localStorage.setItem("notifyModalOpenAlready",!1)}},{key:"render",value:function(){var e=this,t=!1,a=0,n={},i=this.props.allTickets.filter(function(r){var i=!1,s=!1,c=!1;return e.props.allTeacherTickets.forEach(function(t){t.ticketId===r.id&&t.userId===e.props.activeUser.id&&r.classId===e.props.activeUser.classId?(c=!0,i=!0):t.ticketId===r.id&&(c=!0,s=!0)}),!1===r.ticketComplete&&c&&r.userId===e.props.activeUser.id&&(t=!0,a++,n=r),!1!==r.ticketComplete||i||!1!==s?null:r});t&&!1===this.state.openNotify&&setTimeout(function(){e.handleNotifyModal(!0,n),console.log(a)},0);var s=i.map(function(t,a){var n=!1,i=[],s=0,c=!1;return e.props.allUsers.forEach(function(e){t.userId===e.id&&i.push(e.image)}),e.props.allUsers.forEach(function(a){e.props.joinedTickets.forEach(function(n){t.id===n.ticketId&&n.userId===a.id&&i.push(a.image),t.id===n.ticketId&&n.userId===e.props.activeUser.id&&(c=!0,s=n.id)})}),i.length>1&&(n=!0),r.a.createElement(V,Object.assign({},e.props,{key:a,item:t,index:a,image:i,editTicketState:e.editTicketState,handleOpenModal:e.handleOpenCloseModal,handleNotifyModal:e.handleNotifyModal,hasMultipleJoins:n,showRemoveJoin:c,joinedTicketId:s}))});return r.a.createElement("div",{className:"new-ticket-container"},r.a.createElement(W,null),r.a.createElement("span",null," ",s," "),r.a.createElement(q,Object.assign({},this.props,{editTicketItem:this.state.editTicketItem,handleOpenCloseModal:this.handleOpenCloseModal,openModal:this.state.openModal})),r.a.createElement(H,Object.assign({},this.props,{notifyTicketItem:this.state.notifyTicketItem,handleNotifyModal:this.handleNotifyModal,openNotify:this.state.openNotify})))}}]),t}(n.Component),G=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={userId:"",classId:"",ticketComplete:"",ticketTitle:"",ticketBody:"",submitTime:"",linked:"",solutionNotes:""},a.handleComplete=function(){a.props.editTicket({userId:a.props.item.userId,classId:a.props.item.classId,ticketComplete:!0,ticketTitle:a.props.item.ticketTitle,ticketBody:a.props.item.ticketBody,submitTime:a.props.item.submitTime,linked:a.props.item.linked,solutionNotes:a.state.solutionNotes,id:a.props.item.id})},a.handleReassign=function(){a.props.removeTeacherTicket(a.props.item.teacherTicketJoinId),a.props.editTicket({userId:a.props.item.userId,classId:a.props.item.classId,ticketComplete:!1,ticketTitle:a.props.item.ticketTitle,ticketBody:a.props.item.ticketBody,submitTime:a.props.item.submitTime,linked:a.props.item.linked,solutionNotes:a.state.solutionNotes,id:a.props.item.id})},a.getUserImage=function(){return"object"===typeof a.props.image?a.props.image.map(function(e,t){return r.a.createElement("div",{className:"user-image-inline",key:t},r.a.createElement(x.a,{className:"circular tiny",key:t,src:e}))}):r.a.createElement(x.a,{className:"circular tiny",src:a.props.image})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(R.a,{centered:!0,fluid:!0,raised:!0,key:this.props.item.id},r.a.createElement("div",{className:"user-image-container"},this.getUserImage()),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,null,this.props.item.ticketTitle),r.a.createElement(R.a.Description,null,this.props.item.ticketBody),r.a.createElement(R.a.Meta,null,this.props.item.submitTime),r.a.createElement(B.a,null,r.a.createElement(D.a,{label:"Solution Notes",placeholder:"Solution Notes",defaultValue:this.props.item.solutionNotes,onChange:function(t){return e.setState({solutionNotes:t.target.value})}})),r.a.createElement(J.a,{className:"rose",onClick:this.handleReassign},"Reassign"),r.a.createElement(J.a,{className:"trolley",onClick:this.handleComplete},"Complete"))))}}]),t}(n.Component),K=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",null,"Current Ticket")}}]),t}(n.Component),$=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=0,a=this.props.allTickets.filter(function(a){var n=!1;return e.props.allTeacherTickets.forEach(function(r){r.ticketId===a.id&&r.userId===e.props.activeUser.id&&(n=!0,t=r.id)}),!1===a.ticketComplete&&n?(a.teacherTicketJoinId=t,a):null}).map(function(t,a){var n=!1,i=[];return e.props.allUsers.forEach(function(e){t.userId===e.id&&i.push(e.image)}),e.props.allUsers.forEach(function(a){e.props.joinedTickets.forEach(function(e){t.id===e.ticketId&&e.userId===a.id&&i.push(a.image)})}),i.length>1&&(n=!0),r.a.createElement(G,Object.assign({},e.props,{key:a,item:t,index:a,image:i,editTicketState:e.editTicketState,handleOpenModal:e.handleOpenCloseModal,hasMultipleJoins:n}))});return r.a.createElement("div",{className:"current-ticket-container"},r.a.createElement(K,null),r.a.createElement("span",null," ",a," "))}}]),t}(n.Component),Q=a(444),X=a(447),Z={display:"none"},_=function(){return r.a.createElement(B.a,{style:Z,className:"ticketFormSuccess",success:!0},r.a.createElement(Q.a,{success:!0,header:"Form Completed",content:"Your ticket is now in queue"}))},ee=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",null,"Submit a New Ticket")}}]),t}(n.Component),te=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).newTicket=function(){a.props.addTicket({userId:a.props.activeUser.id,classId:a.props.activeUser.classId,ticketComplete:!1,ticketTitle:a.state.ticketTitle,ticketBody:a.state.ticketBody,submitTime:P()(new Date).format("MMMM Do YYYY, h:mm:ss a"),open:!0,linked:!1,solutionNotes:null}).then(function(){setTimeout(function(){document.querySelector(".ticketFormSuccess").style.display="block",document.querySelector(".form-fields").reset(),setTimeout(function(){document.querySelector(".ticketFormSuccess").style.display="none"},1e3)},200)})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"new-ticket-container"},r.a.createElement(ee,null),r.a.createElement(X.a,null,r.a.createElement(X.a.Row,{centered:!0},r.a.createElement(X.a.Column,null,r.a.createElement(B.a,{className:"form-fields fluid",onSubmit:this.newTicket},r.a.createElement(B.a.Field,{control:"input",type:"text",label:"Ticket Title",onChange:function(t){return e.setState({ticketTitle:t.target.value})},placeholder:"Ticket Title"}),r.a.createElement(B.a.Field,{control:"textarea",type:"text",label:"Ticket Body",onChange:function(t){return e.setState({ticketBody:t.target.value})},placeholder:"Ticket Body"}),r.a.createElement(J.a,{className:"trolley",type:"submit",content:"Save",floated:"right"}))))),r.a.createElement(_,null)))}}]),t}(n.Component),ae=Object(w.f)(te),ne=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).handleView=function(){return null!==a.props.activeUser&&!1===a.props.activeUser.student?r.a.createElement("div",{className:"ticket-list"},r.a.createElement(z,a.props),r.a.createElement($,a.props)):null!==a.props.activeUser&&a.props.activeUser.student?r.a.createElement("div",{className:"ticket-list"},r.a.createElement(z,a.props),r.a.createElement(ae,a.props)):void 0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.handleView())}}]),t}(n.Component),re={getTicket:function(e){return h.a.database().ref("/tickets/"+e).once("value").then(function(e){return e.val()})},saveTicket:function(e){var t=h.a.database().ref().child("tickets").push().key;return e.id=t,h.a.database().ref("tickets/"+t).set(e)},editTicket:function(e){var t=this,a={};return a["/tickets/"+e.id]=e,h.a.database().ref().update(a).then(function(){return t.getTicket(e.id)})}},ie=(a(149),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={name:"",username:"",email:"",password:"",newPassword:"",image:"",blurb:"",available:"",student:""},a.displayConditions=function(){return a.props.editMode?r.a.createElement("div",null,r.a.createElement(R.a,{centered:!0,fluid:!0,className:"card-dash"},r.a.createElement("span",null,r.a.createElement("label",null,"Name: "),r.a.createElement(U.a,{type:"text",id:"name",defaultValue:a.props.activeUser.name})),r.a.createElement("span",null,r.a.createElement("label",null,"Userame: "),r.a.createElement(U.a,{type:"text",id:"username",defaultValue:a.props.activeUser.username})),r.a.createElement("span",null,r.a.createElement("label",null,"Blurb: "),r.a.createElement(U.a,{type:"text",id:"blurb",defaultValue:a.props.activeUser.blurb})),r.a.createElement("span",null,r.a.createElement("label",null,"Email: "),r.a.createElement(U.a,{type:"text",id:"email",defaultValue:a.props.activeUser.email})),r.a.createElement("span",null,r.a.createElement("label",null,"Current Password: "),r.a.createElement(U.a,{type:"password",id:"password"})),r.a.createElement("span",null,r.a.createElement("label",null,"New Password: "),r.a.createElement(U.a,{type:"password",id:"newPassword"})))):r.a.createElement("div",null,r.a.createElement(R.a,{centered:!0,fluid:!0,className:"card-dash"},r.a.createElement("span",null,r.a.createElement("label",null,"Name: "),a.props.activeUser.name),r.a.createElement("span",null,r.a.createElement("label",null,"Userame: "),a.props.activeUser.username),r.a.createElement("span",null,r.a.createElement("label",null,"Blurb: "),a.props.activeUser.blurb),r.a.createElement("span",null,r.a.createElement("label",null,"Email: "),a.props.activeUser.email)))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.displayConditions())}}]),t}(n.Component)),se=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={image:""},a.displayConditions=function(){return a.props.editMode?r.a.createElement(R.a,{centered:!0,fluid:!0,className:"card-dash"},r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Description,null,r.a.createElement(B.a.Field,{className:"choose-upload-button",control:"input",type:"file",label:"Photo",onChange:function(e){return a.setState({image:e.target.files[0]})},placeholder:"Photo"}),r.a.createElement(B.a.Field,{control:"input",type:"hidden"})))):r.a.createElement(R.a,{centered:!0,fluid:!0,className:"card-dash"},r.a.createElement(x.a,{centered:!0,size:"small",src:a.props.activeUser.image,alt:"user profile",className:"user-image"}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.displayConditions())}}]),t}(n.Component),ce=(a(221),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).storageRef=d.storage().ref("userImage"),a.state={editMode:!1,editModeImage:!1},a.handleEditState=function(){a.setState({editMode:!0})},a.handleEditImage=function(){a.setState({editModeImage:!0})},a.handleSaveImage=function(){var e=document.querySelector(".choose-upload-button input[type='file']").files;e.length>0&&a.storageRef.child("".concat(Date.now())).put(e[0]).then(function(e){return e.ref.getDownloadURL()}).then(function(e){a.props.editUser({id:a.props.activeUser.id,name:a.props.activeUser.name,username:a.props.activeUser.username,blurb:a.props.activeUser.blurb,email:a.props.activeUser.email,password:null,image:e,available:a.props.activeUser.available,student:a.props.activeUser.student})});a.setState({editModeImage:!1})},a.reauthenticate=function(e){var t=d.auth().currentUser,a=d.auth.EmailAuthProvider.credential(t.email,e);return t.reauthenticateWithCredential(a)},a.changePassword=function(e,t){a.reauthenticate(e).then(function(){d.auth().currentUser.updatePassword(t).then(function(){alert("Password updated!")}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},a.changeEmail=function(e,t){a.reauthenticate(e).then(function(){d.auth().currentUser.updateEmail(t).then(function(){console.log("Email updated!")}).catch(function(e){console.log(e)})}).catch(function(e){console.log(e)})},a.handleSaveState=function(){var e=document.querySelector("#name").value,t=document.querySelector("#username").value,n=document.querySelector("#blurb").value,r=document.querySelector("#email").value,i=document.querySelector("#password").value,s=document.querySelector("#newPassword").value;""!==i||r===a.props.activeUser.email?""!==i||""===s?(a.props.editUser({id:a.props.activeUser.id,name:e,username:t,blurb:n,email:r,password:null,image:a.props.activeUser.image,available:a.props.activeUser.available,student:a.props.activeUser.student}),""!==i&&""!==s&&i!==s&&a.changePassword(i,s),""!==i&&r!==a.props.activeUser.email&&a.changeEmail(i,r),a.setState({editMode:!1})):alert("please enter you password to change your password"):alert("please enter you password to change your email")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"profile-container"},r.a.createElement("h1",null,"Welcome back ",this.props.activeUser.name),r.a.createElement("div",{className:"image-section"},r.a.createElement(se,Object.assign({},this.props,{editMode:this.state.editModeImage})),this.state.editModeImage?r.a.createElement(J.a,{className:"trolley",onClick:this.handleSaveImage},"Save Image"):r.a.createElement(J.a,{className:"trolley",onClick:this.handleEditImage},"Edit Image")),r.a.createElement("div",{className:"input-fields-section"},r.a.createElement(ie,Object.assign({},this.props,{editMode:this.state.editMode})),this.state.editMode?r.a.createElement(J.a,{className:"trolley",onClick:this.handleSaveState},"Save"):r.a.createElement(J.a,{className:"trolley",onClick:this.handleEditState},"Edit")))}}]),t}(n.Component)),le={getCurrentTicketUser:function(e){return h.a.database().ref("/currentTicketUsers/"+e).once("value").then(function(e){return e.val()})},deleteCurrentTicketUser:function(e){return h.a.database().ref("currentTicketUsers/"+e).remove()},saveCurrentTicketUser:function(e){var t=h.a.database().ref().child("currentTicketUsers").push().key;return e.id=t,h.a.database().ref("currentTicketUsers/"+t).set(e)},editCurrentTicketUser:function(e){var t=this,a={};return a["/currentTicketUsers/"+e.id]=e,h.a.database().ref().update(a).then(function(){return t.getCurrentTicketUser(e.id)})}},oe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).getUserImage=function(){return"object"===typeof a.props.image?a.props.image.map(function(e,t){return r.a.createElement("div",{className:"user-image-inline",key:t},r.a.createElement(x.a,{className:"circular tiny",key:t,src:e}))}):r.a.createElement(x.a,{className:"circular tiny",src:a.props.image})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(R.a,{centered:!0,fluid:!0,raised:!0,key:this.props.item.id},r.a.createElement("div",{className:"user-image-container"},this.getUserImage()),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,null,this.props.item.ticketTitle),r.a.createElement(R.a.Description,null,this.props.item.ticketBody),r.a.createElement(R.a.Description,null,"Solution Notes: ",this.props.item.solutionNotes),r.a.createElement(R.a.Meta,null,this.props.item.submitTime)))}}]),t}(n.Component),ue=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",null,"My Solved Tickets")}}]),t}(n.Component),pe=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.reverseTickets.filter(function(t){var a=!1;return e.props.allTeacherTickets.forEach(function(n){n.ticketId===t.id&&n.userId===e.props.activeUser.id&&(a=!0)}),t.ticketComplete&&a?t:null}).map(function(t,a){var n=!1,i=[];return e.props.allUsers.forEach(function(e){t.userId===e.id&&i.push(e.image)}),e.props.allUsers.forEach(function(a){e.props.joinedTickets.forEach(function(e){t.id===e.ticketId&&e.userId===a.id&&i.push(a.image)})}),i.length>1&&(n=!0),r.a.createElement(oe,Object.assign({},e.props,{key:a,item:t,index:a,image:i,hasMultipleJoins:n}))});return r.a.createElement("div",{className:"new-ticket-container"},r.a.createElement(ue,null),r.a.createElement("span",null," ",t," "))}}]),t}(n.Component),me=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).getUserImage=function(){return"object"===typeof a.props.image?a.props.image.map(function(e,t){return r.a.createElement("div",{className:"user-image-inline",key:t},r.a.createElement(x.a,{className:"circular tiny",key:t,src:e}))}):r.a.createElement(x.a,{className:"circular tiny",src:a.props.image})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(R.a,{centered:!0,fluid:!0,raised:!0,key:this.props.item.id},r.a.createElement("div",{className:"user-image-container"},this.getUserImage()),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,null,this.props.item.ticketTitle),r.a.createElement(R.a.Description,null,this.props.item.ticketBody),r.a.createElement(R.a.Description,null,"Solution Notes: ",this.props.item.solutionNotes),r.a.createElement(R.a.Meta,null,this.props.item.submitTime)))}}]),t}(n.Component),de=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",null,"All Solved Tickets")}}]),t}(n.Component),he=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.reverseTickets.filter(function(t){var a=!1;return e.props.allTeacherTickets.forEach(function(n){n.ticketId===t.id&&n.userId===e.props.activeUser.id&&(a=!0)}),t.ticketComplete&&t.classId===e.props.activeUser.classId&&!a?t:null}).map(function(t,a){var n="";return e.props.allUsers.forEach(function(e){t.userId===e.id&&(n=e.image)}),r.a.createElement(me,Object.assign({},e.props,{key:a,item:t,index:a,image:n}))});return r.a.createElement("div",{className:"new-ticket-container"},r.a.createElement(de,null),r.a.createElement("span",null," ",t," "))}}]),t}(n.Component),fe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).getUserImage=function(){return"object"===typeof a.props.image?a.props.image.map(function(e,t){return r.a.createElement("div",{className:"user-image-inline",key:t},r.a.createElement(x.a,{className:"circular tiny",key:t,src:e}))}):r.a.createElement(x.a,{className:"circular tiny",src:a.props.image})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(R.a,{className:"ticket-height",centered:!0,fluid:!0,raised:!0,key:this.props.item.id},r.a.createElement("div",{className:"user-image-container"},this.getUserImage()),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,null,this.props.item.ticketTitle),r.a.createElement(R.a.Description,null,this.props.item.ticketBody),r.a.createElement(R.a.Description,null,"Solution Notes: ",this.props.item.solutionNotes),r.a.createElement(R.a.Meta,null,this.props.item.submitTime)))}}]),t}(n.Component),ve=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",null,"My Solved Tickets")}}]),t}(n.Component),ke=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.reverseTickets.filter(function(t){return t.ticketComplete&&t.userId===e.props.activeUser.id?t:null}).map(function(t,a){var n="";return e.props.allUsers.forEach(function(e){t.userId===e.id&&(n=e.image)}),r.a.createElement(fe,Object.assign({},e.props,{key:a,item:t,index:a,image:n}))});return r.a.createElement("div",{className:"new-ticket-container"},r.a.createElement(ve,null),r.a.createElement("span",null," ",t," "))}}]),t}(n.Component),Ee=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).getUserImage=function(){return"object"===typeof a.props.image?a.props.image.map(function(e,t){return r.a.createElement("div",{className:"user-image-inline",key:t},r.a.createElement(x.a,{className:"circular tiny",key:t,src:e}))}):r.a.createElement(x.a,{className:"circular tiny",src:a.props.image})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(R.a,{className:"ticket-height",centered:!0,fluid:!0,raised:!0,key:this.props.item.id},r.a.createElement("div",{className:"user-image-container"},this.getUserImage()),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,null,this.props.item.ticketTitle),r.a.createElement(R.a.Description,null,this.props.item.ticketBody),r.a.createElement(R.a.Description,null,"Solution Notes: ",this.props.item.solutionNotes),r.a.createElement(R.a.Meta,null,this.props.item.submitTime)))}}]),t}(n.Component),be=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("h1",null,"All Solved Tickets")}}]),t}(n.Component),ge=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.reverseTickets.filter(function(t){return t.ticketComplete&&t.classId===e.props.activeUser.classId&&t.userId!==e.props.activeUser.id?t:null}).map(function(t,a){var n=!1,i=[];return e.props.allUsers.forEach(function(e){t.userId===e.id&&i.push(e.image)}),e.props.allUsers.forEach(function(a){e.props.joinedTickets.forEach(function(e){t.id===e.ticketId&&e.userId===a.id&&i.push(a.image)})}),i.length>1&&(n=!0),r.a.createElement(Ee,Object.assign({},e.props,{key:a,item:t,index:a,image:i,hasMultipleJoins:n}))});return r.a.createElement("div",{className:"new-ticket-container"},r.a.createElement(be,null),r.a.createElement("span",null," ",t," "))}}]),t}(n.Component),ye=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).handleView=function(){return null!==a.props.activeUser&&!1===a.props.activeUser.student?r.a.createElement("div",{className:"ticket-list"},r.a.createElement(pe,a.props),r.a.createElement(he,a.props)):null!==a.props.activeUser&&a.props.activeUser.student?r.a.createElement("div",{className:"ticket-list"},r.a.createElement(ke,a.props),r.a.createElement(ge,a.props)):void 0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.handleView())}}]),t}(n.Component),Te={getJoinedTicket:function(e){return h.a.database().ref("/joinedTickets/"+e).once("value").then(function(e){return e.val()})},deleteJoinedTicket:function(e){return h.a.database().ref("joinedTickets/"+e).remove()},saveJoinedTicket:function(e){var t=h.a.database().ref().child("joinedTickets").push().key;return e.id=t,h.a.database().ref("joinedTickets/"+t).set(e)},editJoinedTicket:function(e){var t=this,a={};return a["/joinedTickets/"+e.id]=e,h.a.database().ref().update(a).then(function(){return t.getJoinedTicket(e.id)})}},je=a(245),Oe=a(439),Ce=a(448),Ie=a(446),Ne=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).saveAndContinue=function(e){e.preventDefault(),a.props.nextStep()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.values;return r.a.createElement(Oe.a,{className:"auth-container ui grid container"},r.a.createElement(X.a.Row,{centered:!0},r.a.createElement(X.a.Column,{className:"six wide",largeScreen:6,computer:6,tablet:10,mobile:16},r.a.createElement(Ce.a,null,r.a.createElement(Ie.a,{as:"h1",textAlign:"center"},"User Details"),r.a.createElement(B.a,{className:"register-form"},r.a.createElement(B.a.Field,{control:"input",type:"text",label:"Full Name",placeholder:"Enter your first and last name",onChange:this.props.handleChange("name"),defaultValue:e.name}),r.a.createElement(B.a.Field,{control:"input",type:"email",label:"Email Address",placeholder:"Enter an email",onChange:this.props.handleChange("email"),defaultValue:e.email}),r.a.createElement(B.a.Field,{control:"input",type:"password",label:"Password",placeholder:"Password",onChange:this.props.handleChange("password")}),r.a.createElement(J.a,{className:"ui right floated trolley",onClick:this.saveAndContinue},"Save and Continue ")),r.a.createElement("div",{className:"ui four steps"},r.a.createElement("div",{className:"ui active step"},"User Details"),r.a.createElement("div",{className:"ui disabled step"},"Class Details"),r.a.createElement("div",{className:"ui disabled step"},"Image"),r.a.createElement("div",{className:"ui disabled step"},"Confirm"))))))}}]),t}(n.Component),Ue=(a(220),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={student:a.props.state.student,classId:a.props.state.classId,cohortName:a.props.state.cohortName},a.saveAndContinue=function(e){e.preventDefault(),a.props.nextStep()},a.back=function(e){e.preventDefault(),a.props.prevStep()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.values,a=this.props.allClasses.map(function(e,t){return{key:t,text:e.cohortName,value:e.id}});return r.a.createElement(Oe.a,{className:"auth-container ui grid container"},r.a.createElement(X.a.Row,{centered:!0},r.a.createElement(X.a.Column,{className:"six wide",largeScreen:6,computer:6,tablet:10,mobile:16},r.a.createElement(Ce.a,null,r.a.createElement(Ie.a,{as:"h1",textAlign:"center"},"Class Details"),r.a.createElement(B.a,{className:"register-form"},r.a.createElement(B.a.Field,{control:"input",type:"text",label:"Username",placeholder:"Enter a username",onChange:this.props.handleChange("username"),defaultValue:t.username}),r.a.createElement(B.a.Field,{control:"input",type:"text",label:"Blurb",placeholder:"Enter a short blurb about yourself",onChange:this.props.handleChange("blurb"),defaultValue:t.blurb}),r.a.createElement(R.a,{className:"horizontal segments"},r.a.createElement("div",{className:"ui segment"},r.a.createElement(B.a.Radio,{className:"radioOne",label:"Student",checked:!0===this.state.student,onChange:function(t,a){a.value;e.setState({student:!0}),e.props.handleChangeStudent(!0)}}),r.a.createElement(B.a.Radio,{className:"radioTwo",label:"Teacher",checked:!1===this.state.student,onChange:function(t,a){a.value;e.setState({student:!1}),e.props.handleChangeStudent(!1)}})),r.a.createElement("div",{className:"ui segment dropdownOne"},r.a.createElement(B.a.Field,null,r.a.createElement(N.a,{onChange:function(t,a){e.setState({classId:a.value,cohortName:t.currentTarget.textContent}),e.props.handleChangeClasses(t.currentTarget.textContent,a.value)},value:this.state.classId,options:a,closeOnChange:!0,fluid:!0,search:!0,item:!0,selection:!0,upward:!1,placeholder:"Select a Class"})))),r.a.createElement(J.a,{className:"ui left floated trolley",onClick:this.back},"Back"),r.a.createElement(J.a,{className:"ui right floated trolley",onClick:this.saveAndContinue},"Save and Continue ")),r.a.createElement("div",{className:"ui four steps"},r.a.createElement("div",{className:"ui disabled step"},"User Details"),r.a.createElement("div",{className:"ui active step"},"Class Details"),r.a.createElement("div",{className:"ui disabled step"},"Image"),r.a.createElement("div",{className:"ui disabled step"},"Confirm"))))))}}]),t}(n.Component)),Se=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={image:a.props.state.image},a.saveAndContinue=function(e){e.preventDefault(),a.props.nextStep()},a.back=function(e){e.preventDefault(),a.props.prevStep()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Oe.a,{className:"auth-container ui grid container"},r.a.createElement(X.a.Row,{centered:!0},r.a.createElement(X.a.Column,{className:"six wide",largeScreen:6,computer:6,tablet:10,mobile:16},r.a.createElement(Ce.a,null,r.a.createElement(Ie.a,{as:"h1",textAlign:"center"},"Upload an Image"),r.a.createElement(B.a,{className:"register-form"},r.a.createElement(B.a.Field,{className:"choose-upload-button",control:"input",type:"file",label:"Photo",onChange:function(t){e.setState({image:t.target.files[0]}),e.props.handleChange(t.target.files[0])},placeholder:"Photo"}),r.a.createElement(J.a,{className:"ui left floated trolley",onClick:this.back},"Back"),r.a.createElement(J.a,{className:"ui right floated trolley",onClick:this.saveAndContinue},"Save and Continue ")),r.a.createElement("div",{className:"ui four steps"},r.a.createElement("div",{className:"ui disabled step"},"User Details"),r.a.createElement("div",{className:"ui disabled step"},"Class Details"),r.a.createElement("div",{className:"ui active step"},"Image"),r.a.createElement("div",{className:"ui disabled step"},"Confirm"))))))}}]),t}(n.Component),we={display:"none"},Me=function(){return r.a.createElement(B.a,{style:we,className:"registerFormSuccess",success:!0},r.a.createElement(Q.a,{success:!0,header:"Form Completed",content:"Thank you for registering!"}))},Ae=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).storageRef=d.storage().ref("userImage"),a.saveAndContinue=function(e){e.preventDefault(),a.props.nextStep()},a.back=function(e){e.preventDefault(),a.props.prevStep()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.values,a=t.name,n=t.username,i=t.email,s=t.blurb,c=t.classId,l=t.student,o=t.image,u=t.password,p=t.cohortName;return r.a.createElement(Oe.a,{className:"auth-container ui grid container"},r.a.createElement(X.a.Row,{centered:!0},r.a.createElement(X.a.Column,{className:"six wide",largeScreen:6,computer:6,tablet:10,mobile:16},r.a.createElement(Ce.a,null,r.a.createElement(Ie.a,{as:"h1",textAlign:"center"},"Confirm your Details"),r.a.createElement(R.a,{fluid:!0},r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Description,null,r.a.createElement("p",null,"Full Name: ",a),r.a.createElement("p",null,"Username: ",n),r.a.createElement("p",null,"Email: ",i),r.a.createElement("p",null,"Blurb: ",s),r.a.createElement("p",null,"Class: ",p),r.a.createElement("p",null,"Status: ",l?"Student":"Teacher"),r.a.createElement("p",null,"Image: ",""!==o&&null!==o?o.name:"")))),r.a.createElement(J.a,{className:"ui left floated trolley",onClick:this.back},"Back"),r.a.createElement(J.a,{className:"ui right floated trolley",onClick:function(){e.storageRef.child("".concat(Date.now())).put(o).then(function(e){return e.ref.getDownloadURL()}).then(function(t){var r;(r={name:a,username:n,email:i,password:u,image:t,blurb:s,available:"",classId:c,student:l},y(r.email,r.password).then(function(e){return r.password=null,r.id=e,f.saveUser(r)}).then(function(e){return v(e),e}).catch(function(e){alert("Yikes, you did not register"),console.log(e)})).then(function(t){e.props.onRegister(t)})}).then(function(){setTimeout(function(){document.querySelector(".registerFormSuccess").style.display="block"},200)}).then(function(){setTimeout(function(){e.props.history.push("/dashboard")},2e3)})}},"Register"),r.a.createElement("div",{className:"ui four steps"},r.a.createElement("div",{className:"ui disabled step"},"User Details"),r.a.createElement("div",{className:"ui disabled step"},"Class Details"),r.a.createElement("div",{className:"ui disabled step"},"Image"),r.a.createElement("div",{className:"ui active step"},"Confirm"))))),r.a.createElement(Me,null))}}]),t}(n.Component),xe=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={step:1,name:"",username:"",email:"",password:null,image:"",blurb:"",available:"",classId:"",cohortName:"",student:!1},a.nextStep=function(){var e=a.state.step;a.setState({step:e+1})},a.prevStep=function(){var e=a.state.step;a.setState({step:e-1})},a.handleChange=function(e){return function(t){a.setState(Object(je.a)({},e,t.target.value))}},a.handleChangeStudent=function(e){a.setState({student:e})},a.handleChangeImage=function(e){a.setState({image:e})},a.handleChangeClasses=function(e,t){a.setState({classId:t,cohortName:e})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.state.step,t=this.state,a={name:t.name,username:t.username,email:t.email,password:t.password,image:t.image,blurb:t.blurb,available:t.available,classId:t.classId,student:t.student,cohortName:t.cohortName};switch(e){case 1:return r.a.createElement(Ne,{nextStep:this.nextStep,handleChange:this.handleChange,values:a});case 2:return r.a.createElement(Ue,Object.assign({},this.props,{state:this.state,nextStep:this.nextStep,prevStep:this.prevStep,handleChange:this.handleChange,handleChangeStudent:this.handleChangeStudent,handleChangeClasses:this.handleChangeClasses,values:a}));case 3:return r.a.createElement(Se,Object.assign({},this.props,{state:this.state,nextStep:this.nextStep,prevStep:this.prevStep,handleChange:this.handleChangeImage,values:a}));case 4:return r.a.createElement(Ae,Object.assign({},this.props,{state:this.state,nextStep:this.nextStep,prevStep:this.prevStep,values:a}))}}}]),t}(n.Component),Be=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={email:"",password:""},a.submit=function(){k(a.state.email,a.state.password).then(function(e){a.props.onLogin(e),a.props.history.push("/")})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Oe.a,{className:"auth--container"},r.a.createElement(X.a,null,r.a.createElement(X.a.Row,{centered:!0},r.a.createElement(X.a.Column,{largeScreen:6,computer:6,tablet:10,mobile:16},r.a.createElement(Ce.a,null,r.a.createElement(Ie.a,{as:"h1",textAlign:"center"},"Log In"),r.a.createElement(B.a,{className:"login--form",onSubmit:this.submit},r.a.createElement(B.a.Field,{control:"input",type:"email",label:"Email Address",placeholder:"Enter an email",onChange:function(t){return e.setState({email:t.target.value})}}),r.a.createElement(B.a.Field,{control:"input",type:"password",label:"Password",placeholder:"Password",onChange:function(t){return e.setState({password:t.target.value})}}),r.a.createElement(B.a.Field,{control:"input",type:"hidden"}),r.a.createElement(J.a,{className:"trolley",fluid:!0,content:"Log in"})),r.a.createElement(Q.a,{className:"auth--message"},"Not registered yet? ",r.a.createElement(c.b,{to:"/register"},"Sign Up")))))))}}]),t}(n.Component),De=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).logout=function(){a.props.onLogout(),a.props.history.push("/login")},a.solvedTickets=function(){var e=0;return a.props.activeUser.student?e=a.props.ticket.filter(function(e){return e.userId===a.props.activeUser.id&&e.ticketComplete&&e.classId===a.props.activeUser.classId?e:null}):!1===a.props.activeUser.student&&(e=a.props.ticket.filter(function(e){var t=!1;return a.props.allTeacherTickets.forEach(function(n){n.ticketId===e.id&&n.userId===a.props.activeUser.id&&(t=!0)}),e.classId===a.props.activeUser.classId&&e.ticketComplete&&t?e:null})),e},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(Oe.a,{className:"home--container"},r.a.createElement(X.a,null,r.a.createElement(X.a.Row,{centered:!0},r.a.createElement(X.a.Column,{largeScreen:8,computer:10,tablet:12,mobile:16},r.a.createElement(Ie.a,{textAlign:"center"},"Welcome ",this.props.activeUser.name),r.a.createElement(Q.a,{header:"You have solved",content:this.solvedTickets().length+" tickets"})))))}}]),t}(n.Component),Je=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={users:[],tickets:[],reverseTickets:[],joinedTickets:[],classTickets:[],currentTicketUsers:[],classes:[]},a.addTicket=function(e){var t={};return re.saveTicket(e).then(function(e){return a.props.history.push("/tickets/my-tickets"),a.setState(t),e})},a.editTicket=function(e){var t={};re.editTicket(e).then(function(){a.props.history.push("/tickets/my-tickets"),a.setState(t)})},a.deleteUser=function(e){var t={};f.deleteUser(e).then(function(){a.props.history.push("/dashboard"),a.setState(t)})},a.addUser=function(e){var t={};return f.saveUser(e).then(function(n){return a.props.setUser(e),a.props.history.push("/dashboard"),a.setState(t),n})},a.editUser=function(e){var t={};f.editUser(e).then(function(){a.props.setUser(e),a.props.history.push("/dashboard"),a.setState(t)})},a.deleteCurrentTicketUser=function(e){var t={};le.deleteCurrentTicketUser(e).then(function(){return a.props.history.push("/tickets/my-tickets"),a.setState(t),e})},a.addCurrentTicketUser=function(e){var t={};return le.saveCurrentTicketUser(e).then(function(e){return a.props.history.push("/tickets/my-tickets"),a.setState(t),e})},a.editCurrentTicketUser=function(e){var t={};le.editCurrentTicketUser(e).then(function(){a.props.history.push("/tickets/my-tickets"),a.setState(t)})},a.deleteJoin=function(e){var t={};Te.deleteJoinedTicket(e).then(function(){a.props.history.push("/tickets/my-tickets"),a.setState(t)})},a.addJoin=function(e){var t={};return Te.saveJoinedTicket(e).then(function(e){return a.props.history.push("/tickets/my-tickets"),a.setState(t),e})},a.editJoin=function(e){var t={};Te.editJoinedTicket(e).then(function(){a.props.history.push("/tickets/my-tickets"),a.setState(t)})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t={},a=h.a.database();a.ref("tickets/").on("value",function(a){var n=[],r=a.val();for(var i in r)n.push(r[i]);t.tickets=n,e.setState(t)}),a.ref("users/").on("value",function(a){var n=[],r=a.val();for(var i in r)n.push(r[i]);t.users=n,e.setState(t)}),a.ref("joinedTickets/").on("value",function(a){var n=[],r=a.val();for(var i in r)n.push(r[i]);t.joinedTickets=n,e.setState(t)}),a.ref("classTickets/").on("value",function(a){var n=[],r=a.val();for(var i in r)n.push(r[i]);t.classTickets=n,e.setState(t)}),a.ref("currentTicketUsers/").on("value",function(a){localStorage.setItem("notifyModalOpenAlready",!1);var n=[],r=a.val();for(var i in r)n.push(r[i]);t.currentTicketUsers=n,e.setState(t)}),a.ref("classes/").on("value",function(a){var n=[],r=a.val();for(var i in r)n.push(r[i]);t.classes=n,e.setState(t)}),a.ref("/tickets/").orderByChild("submitTime").on("value",function(a){var n=[],r=a.val();for(var i in r)n.push(r[i]);t.reverseTickets=n.reverse(),e.setState(t)})}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement(w.b,{exact:!0,path:"/",render:function(t){return e.props.activeUser?r.a.createElement(De,Object.assign({},t,e.props,{activeUser:e.props.activeUser,allUsers:e.state.users,ticket:e.state.tickets,allTeacherTickets:e.state.currentTicketUsers})):r.a.createElement(w.a,{to:"/login"})}}),r.a.createElement(w.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(Be,Object.assign({},t,{onLogin:function(t){return e.props.setUser(t)}}))}}),r.a.createElement(w.b,{exact:!0,path:"/register",render:function(t){return r.a.createElement(xe,Object.assign({},t,e.props,{allUsers:e.state.users,allClasses:e.state.classes,addClass:e.addClass,editClass:e.editClass,onRegister:function(t){return e.props.setUser(t)}}))}}),r.a.createElement(w.b,{exact:!0,path:"/dashboard",render:function(t){return e.props.activeUser?r.a.createElement(ce,Object.assign({},t,e.props,{user:e.state.users,editUser:e.editUser})):r.a.createElement(w.a,{to:"/login"})}}),r.a.createElement(w.b,{exact:!0,path:"/tickets/my-tickets",render:function(t){return e.props.activeUser?r.a.createElement(ne,Object.assign({},t,e.props,{allUsers:e.state.users,allTickets:e.state.tickets,joinedTickets:e.state.joinedTickets,addTicket:e.addTicket,editTicket:e.editTicket,addJoin:e.addJoin,editJoin:e.editJoin,deleteJoin:e.deleteJoin,allTeacherTickets:e.state.currentTicketUsers,removeTeacherTicket:e.deleteCurrentTicketUser,addTeacherTicket:e.addCurrentTicketUser,editTeacherTicket:e.editCurrentTicketUser})):r.a.createElement(w.a,{to:"/login"})}}),r.a.createElement(w.b,{exact:!0,path:"/tickets/solved-tickets",render:function(t){return e.props.activeUser?r.a.createElement(ye,Object.assign({},t,e.props,{joinedTickets:e.state.joinedTickets,class:e.state.classes,allUsers:e.state.users,reverseTickets:e.state.reverseTickets,allTeacherTickets:e.state.currentTicketUsers})):r.a.createElement(w.a,{to:"/login"})}}))))}}]),t}(n.Component),Re=Object(w.f)(Je),Fe=(a(424),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).state={activeUser:b()},a.setUser=function(e){localStorage.setItem("user",JSON.stringify(e)),a.setState({activeUser:e})},a.clearActiveUser=function(e){a.setState({activeUser:e})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,null),r.a.createElement(A,{setUser:this.setUser,clearActiveUser:this.clearActiveUser,activeUser:this.state.activeUser,onLogout:g}),r.a.createElement(Re,{setUser:this.setUser,activeUser:this.state.activeUser}))}}]),t}(n.Component));a(425),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(426);var Pe={apiKey:"AIzaSyBy0YSU4oHkpDKIP9ck0a23EHCWLGpUjT4",authDomain:"frontend-capstone-e1589.firebaseapp.com",databaseURL:"https://frontend-capstone-e1589.firebaseio.com",projectId:"frontend-capstone-e1589",storageBucket:"frontend-capstone-e1589.appspot.com",messagingSenderId:"396170941583",appId:"1:396170941583:web:65d3aa4b8f37e54e"};d.initializeApp(Pe),s.a.render(r.a.createElement(c.a,null,r.a.createElement(Fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[256,1,2]]]);
//# sourceMappingURL=main.cf35e6a7.chunk.js.map